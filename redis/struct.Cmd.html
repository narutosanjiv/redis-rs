<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `Cmd` struct in crate `redis`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, Cmd">

    <title>redis::Cmd - Rust</title>

    <link rel="stylesheet" type="text/css" href="../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <section class="sidebar">
        
        <p class='location'><a href='index.html'>redis</a></p><div class='block struct'><h2>Structs</h2><a class='struct ' href='struct.Client.html' title='The client type.'>Client</a><a class='struct current' href='struct.Cmd.html' title='Represents redis commands.'>Cmd</a><a class='struct ' href='struct.Connection.html' title='Represents a stateful redis TCP connection.'>Connection</a><a class='struct ' href='struct.ConnectionInfo.html' title='Holds the connection information that redis should use for connecting.'>ConnectionInfo</a><a class='struct ' href='struct.InfoDict.html' title='An info dictionary type.'>InfoDict</a><a class='struct ' href='struct.Iter.html' title='Represents a redis iterator.'>Iter</a><a class='struct ' href='struct.Msg.html' title='Represents a pubsub message.'>Msg</a><a class='struct ' href='struct.Parser.html' title='The internal redis response parser.'>Parser</a><a class='struct ' href='struct.Pipeline.html' title='Represents a redis command pipeline.'>Pipeline</a><a class='struct ' href='struct.PubSub.html' title='Represents a pubsub connection.'>PubSub</a><a class='struct ' href='struct.RedisError.html' title='Represents a redis error.  For the most part you should be using the Error trait to interact with this rather than the actual struct.'>RedisError</a><a class='struct ' href='struct.Script.html' title='Represents a lua script.'>Script</a><a class='struct ' href='struct.ScriptInvocation.html' title='Represents a prepared script call.'>ScriptInvocation</a></div><div class='block enum'><h2>Enums</h2><a class='enum ' href='enum.ErrorKind.html' title='An enum of all error kinds.'>ErrorKind</a><a class='enum ' href='enum.NumericBehavior.html' title='Helper enum that is used in some situations to describe the behavior of arguments in a numeric context.'>NumericBehavior</a><a class='enum ' href='enum.Value.html' title='Internal low-level redis value enum.'>Value</a></div><div class='block trait'><h2>Traits</h2><a class='trait ' href='trait.Commands.html' title='Implements common redis commands for connection like objects.  This allows you to send commands straight to a connection or client.  It is also implemented for redis results of clients which makes for very convenient access in some basic cases.'>Commands</a><a class='trait ' href='trait.ConnectionLike.html' title='Implements the &quot;stateless&quot; part of the connection interface that is used by the different objects in redis-rs.  Primarily it obviously applies to `Connection` object but also some other objects implement the interface (for instance whole clients or certain redis results).'>ConnectionLike</a><a class='trait ' href='trait.FromRedisValue.html' title='This trait is used to convert a redis value into a more appropriate type.  While a redis `Value` can represent any response that comes back from the redis server, usually you want to map this into something that works better in rust.  For instance you might want to convert the return value into a `String` or an integer.'>FromRedisValue</a><a class='trait ' href='trait.IntoConnectionInfo.html' title='Converts an object into a connection info struct.  This allows the constructor of the client to accept connection information in a range of different formats.'>IntoConnectionInfo</a><a class='trait ' href='trait.PipelineCommands.html' title='Implements common redis commands for pipelines.  Unlike the regular commands trait, this returns the pipeline rather than a result directly.  Other than that it works the same however.'>PipelineCommands</a><a class='trait ' href='trait.ToRedisArgs.html' title='Used to convert a value into one or multiple redis argument strings.  Most values will produce exactly one item but in some cases it might make sense to produce more than one.'>ToRedisArgs</a></div><div class='block fn'><h2>Functions</h2><a class='fn ' href='fn.cmd.html' title='Shortcut function to creating a command with a single argument.'>cmd</a><a class='fn ' href='fn.from_redis_value.html' title='A shortcut function to invoke `FromRedisValue::from_redis_value` to make the API slightly nicer.'>from_redis_value</a><a class='fn ' href='fn.pack_command.html' title='Packs a bunch of commands into a request.  This is generally a quite useless function as this functionality is nicely wrapped through the `Cmd` object, but in some cases it can be useful.  The return value of this can then be send to the low level `ConnectionLike` methods.'>pack_command</a><a class='fn ' href='fn.parse_redis_url.html' title='This function takes a redis URL string and parses it into a URL as used by rust-url.  This is necessary as the default parser does not understand how redis URLs function.'>parse_redis_url</a><a class='fn ' href='fn.parse_redis_value.html' title='Parses bytes into a redis value.'>parse_redis_value</a><a class='fn ' href='fn.pipe.html' title='Shortcut for creating a new pipeline.'>pipe</a><a class='fn ' href='fn.transaction.html' title='This function simplifies transaction management slightly.  What it does is automatically watching keys and then going into a transaction loop util it succeeds.  Once it goes through the results are returned.'>transaction</a></div>
    </section>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press 'S' to search, '?' for more options..."
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><span class='in-band'>Struct <a href='index.html'>redis</a>::<wbr><a class='struct' href=''>Cmd</a><wbr></span><span class='out-of-band'><span id='render-detail'>
            <a id="collapse-all" href="#">[-]</a>&nbsp;<a id="expand-all" href="#">[+]</a>
        </span><a id='src-22590' href='../src/redis/cmd.rs.html#15-19'>[src]</a></span></h1>
<pre class='rust struct'>pub struct Cmd {
    // some fields omitted
}</pre><div class='docblock'><p>Represents redis commands.</p>
</div><h2 id='methods'>Methods</h2><h3 class='impl'><a class='stability Unmarked' title='No stability level'></a><code>impl <a class='struct' href='../redis/struct.Cmd.html' title='redis::Cmd'>Cmd</a></code></h3><div class='docblock'><p>A command acts as a builder interface to creating encoded redis
requests.  This allows you to easiy assemble a packed command
by chaining arguments together.</p>

<p>Basic example:</p>
<pre id='rust-example-rendered' class='rust '>
<span class='ident'>redis</span>::<span class='ident'>Cmd</span>::<span class='ident'>new</span>().<span class='ident'>arg</span>(<span class='string'>&quot;SET&quot;</span>).<span class='ident'>arg</span>(<span class='string'>&quot;my_key&quot;</span>).<span class='ident'>arg</span>(<span class='number'>42i</span>);
</pre>

<p>There is also a helper function called <code>cmd</code> which makes it a
tiny bit shorter:</p>
<pre id='rust-example-rendered' class='rust '>
<span class='ident'>redis</span>::<span class='ident'>cmd</span>(<span class='string'>&quot;SET&quot;</span>).<span class='ident'>arg</span>(<span class='string'>&quot;my_key&quot;</span>).<span class='ident'>arg</span>(<span class='number'>42i</span>);
</pre>

<p>Because currently rust&#39;s currently does not have an ideal system
for lifetimes of temporaries, sometimes you need to hold on to
the initially generated command:</p>
<pre id='rust-example-rendered' class='rust '>
<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>cmd</span> <span class='op'>=</span> <span class='ident'>redis</span>::<span class='ident'>cmd</span>(<span class='string'>&quot;SMEMBERS&quot;</span>);
<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>iter</span> : <span class='ident'>redis</span>::<span class='ident'>Iter</span><span class='op'>&lt;</span><span class='ident'>i32</span><span class='op'>&gt;</span> <span class='op'>=</span> <span class='ident'>cmd</span>.<span class='ident'>arg</span>(<span class='string'>&quot;my_set&quot;</span>).<span class='ident'>iter</span>(<span class='kw-2'>&amp;</span><span class='ident'>con</span>).<span class='ident'>unwrap</span>();
</pre>
</div><div class='impl-items'><h4 id='method.new' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.new' class='fnname'>new</a>() -&gt; <a class='struct' href='../redis/struct.Cmd.html' title='redis::Cmd'>Cmd</a></code></h4>
<div class='docblock'><p>Creates a new empty command.</p>
</div><h4 id='method.arg' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.arg' class='fnname'>arg</a>&lt;T: <a class='trait' href='../redis/trait.ToRedisArgs.html' title='redis::ToRedisArgs'>ToRedisArgs</a>&gt;(&amp;mut self, arg: T) -&gt; &amp;mut <a class='struct' href='../redis/struct.Cmd.html' title='redis::Cmd'>Cmd</a></code></h4>
<div class='docblock'><p>Appends an argument to the command.  The argument passed must
be a type that implements <code>ToRedisArgs</code>.  Most primitive types as
well as vectors of primitive types implement it.</p>

<p>For instance all of the following are valid:</p>
<pre id='rust-example-rendered' class='rust '>
<span class='ident'>redis</span>::<span class='ident'>cmd</span>(<span class='string'>&quot;SET&quot;</span>).<span class='ident'>arg</span>([<span class='string'>&quot;my_key&quot;</span>, <span class='string'>&quot;my_value&quot;</span>].<span class='ident'>as_slice</span>());
<span class='ident'>redis</span>::<span class='ident'>cmd</span>(<span class='string'>&quot;SET&quot;</span>).<span class='ident'>arg</span>(<span class='string'>&quot;my_key&quot;</span>).<span class='ident'>arg</span>(<span class='number'>42i</span>);
<span class='ident'>redis</span>::<span class='ident'>cmd</span>(<span class='string'>&quot;SET&quot;</span>).<span class='ident'>arg</span>(<span class='string'>&quot;my_key&quot;</span>).<span class='ident'>arg</span>(<span class='string'>b&quot;my_value&quot;</span>);
</pre>
</div><h4 id='method.cursor_arg' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.cursor_arg' class='fnname'>cursor_arg</a>(&amp;mut self, cursor: <a href='http://doc.rust-lang.org/nightly/std/primitive.u64.html'>u64</a>) -&gt; &amp;mut <a class='struct' href='../redis/struct.Cmd.html' title='redis::Cmd'>Cmd</a></code></h4>
<div class='docblock'><p>Works similar to <code>arg</code> but adds a cursor argument.  This is always
an integer and also flips the command implementation to support a
different mode for the iterators where the iterator will ask for
another batch of items when the local data is exhausted.</p>
<pre id='rust-example-rendered' class='rust '>
<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>cmd</span> <span class='op'>=</span> <span class='ident'>redis</span>::<span class='ident'>cmd</span>(<span class='string'>&quot;SSCAN&quot;</span>);
<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>iter</span> : <span class='ident'>redis</span>::<span class='ident'>Iter</span><span class='op'>&lt;</span><span class='ident'>int</span><span class='op'>&gt;</span> <span class='op'>=</span> <span class='ident'>cmd</span>.<span class='ident'>arg</span>(<span class='string'>&quot;my_set&quot;</span>).<span class='ident'>cursor_arg</span>(<span class='number'>0</span>).<span class='ident'>iter</span>(<span class='kw-2'>&amp;</span><span class='ident'>con</span>).<span class='ident'>unwrap</span>();
<span class='kw'>for</span> <span class='ident'>x</span> <span class='kw'>in</span> <span class='ident'>iter</span> {
    <span class='comment'>// do something with the item</span>
}
</pre>
</div><h4 id='method.get_packed_command' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.get_packed_command' class='fnname'>get_packed_command</a>(&amp;self) -&gt; <a class='struct' href='http://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a>&gt;</code></h4>
<div class='docblock'><p>Returns the packed command as a byte vector.</p>
</div><h4 id='method.in_scan_mode' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.in_scan_mode' class='fnname'>in_scan_mode</a>(&amp;self) -&gt; <a href='http://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a></code></h4>
<div class='docblock'><p>Returns true if the command is in scan mode.</p>
</div><h4 id='method.query' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.query' class='fnname'>query</a>&lt;T: <a class='trait' href='../redis/trait.FromRedisValue.html' title='redis::FromRedisValue'>FromRedisValue</a>&gt;(&amp;self, con: &amp;<a class='trait' href='../redis/trait.ConnectionLike.html' title='redis::ConnectionLike'>ConnectionLike</a>) -&gt; <a class='type' href='../redis/type.RedisResult.html' title='redis::RedisResult'>RedisResult</a>&lt;T&gt;</code></h4>
<div class='docblock'><p>Sends the command as query to the connection and converts the
result to the target redis value.  This is the general way how
you can retrieve data.</p>
</div><h4 id='method.iter' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.iter' class='fnname'>iter</a>&lt;'a, T: <a class='trait' href='../redis/trait.FromRedisValue.html' title='redis::FromRedisValue'>FromRedisValue</a>&gt;(&amp;self, con: &amp;'a <a class='trait' href='../redis/trait.ConnectionLike.html' title='redis::ConnectionLike'>ConnectionLike</a>) -&gt; <a class='type' href='../redis/type.RedisResult.html' title='redis::RedisResult'>RedisResult</a>&lt;<a class='struct' href='../redis/struct.Iter.html' title='redis::Iter'>Iter</a>&lt;'a, T&gt;&gt;</code></h4>
<div class='docblock'><p>Similar to <code>query()</code> but returns an iterator over the items of the
bulk result or iterator.  In normal mode this is not in any way more
efficient than just querying into a <code>Vec&lt;T&gt;</code> as it&#39;s internally
implemented as buffering into a vector.  This however is useful when
<code>cursor_arg</code> was used in which case the iterator will query for more
items until the server side cursor is exhausted.</p>

<p>This is useful for commands such as <code>SSCAN</code>, <code>SCAN</code> and others.</p>

<p>One speciality of this function is that it will check if the response
looks like a cursor or not and always just looks at the payload.
This way you can use the function the same for responses in the
format of <code>KEYS</code> (just a list) as well as <code>SSCAN</code> (which returns a
tuple of cursor and list).</p>
</div><h4 id='method.execute' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.execute' class='fnname'>execute</a>(&amp;self, con: &amp;<a class='trait' href='../redis/trait.ConnectionLike.html' title='redis::ConnectionLike'>ConnectionLike</a>)</code></h4>
<div class='docblock'><p>This is a shortcut to <code>query()</code> that does not return a value and
will fail the task if the query fails because of an error.  This is
mainly useful in examples and for simple commands like setting
keys.</p>

<p>This is equivalent to a call of query like this:</p>
<pre id='rust-example-rendered' class='rust '>
<span class='kw'>let</span> _ : () <span class='op'>=</span> <span class='ident'>redis</span>::<span class='ident'>cmd</span>(<span class='string'>&quot;PING&quot;</span>).<span class='ident'>query</span>(<span class='kw-2'>&amp;</span><span class='ident'>con</span>).<span class='ident'>unwrap</span>();
</pre>
</div></div><h2 id='implementations'>Trait Implementations</h2><h3 id='derived_implementations'>Derived Implementations </h3><h3 class='impl'><a class='stability Stable' title='Stable'></a><code>impl <a class='trait' href='http://doc.rust-lang.org/nightly/core/clone/trait.Clone.html' title='core::clone::Clone'>Clone</a> for <a class='struct' href='../redis/struct.Cmd.html' title='redis::Cmd'>Cmd</a></code></h3><div class='impl-items'><h4 id='method.clone' class='method'><a class='stability Stable' title='Stable'></a><code>fn <a href='#method.clone' class='fnname'>clone</a>(&amp;self) -&gt; <a class='struct' href='../redis/struct.Cmd.html' title='redis::Cmd'>Cmd</a></code></h4>
<h4 id='method.clone_from' class='tymethod'><a class='stability Unstable' title='Unstable: this function is rarely used'></a><code>fn <a href='#tymethod.clone_from' class='fnname'>clone_from</a>(&amp;mut self, source: &amp;Self)</code></h4>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <div id="help" class="hidden">
        <div class="shortcuts">
            <h1>Keyboard shortcuts</h1>
            <dl>
                <dt>?</dt>
                <dd>Show this help dialog</dd>
                <dt>S</dt>
                <dd>Focus the search field</dd>
                <dt>&larrb;</dt>
                <dd>Move up in search results</dd>
                <dt>&rarrb;</dt>
                <dd>Move down in search results</dd>
                <dt>&#9166;</dt>
                <dd>Go to active search result</dd>
            </dl>
        </div>
        <div class="infos">
            <h1>Search tricks</h1>
            <p>
                Prefix searches with a type followed by a colon (e.g.
                <code>fn:</code>) to restrict the search to a given type.
            </p>
            <p>
                Accepted types are: <code>fn</code>, <code>mod</code>,
                <code>struct</code>, <code>enum</code>,
                <code>trait</code>, <code>typedef</code> (or
                <code>tdef</code>).
            </p>
        </div>
    </div>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "redis";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script async src="../search-index.js"></script>
</body>
</html>